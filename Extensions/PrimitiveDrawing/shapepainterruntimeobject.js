var gdjs;(function(a){const n=class extends a.RuntimeObject{constructor(e,t){super(e,t);this._scaleX=1;this._scaleY=1;this._blendMode=0;this._flippedX=!1;this._flippedY=!1;this._customCenter=null;this._customCollisionMask=null;this._fillColor=parseInt(a.rgbToHex(t.fillColor.r,t.fillColor.g,t.fillColor.b),16),this._outlineColor=parseInt(a.rgbToHex(t.outlineColor.r,t.outlineColor.g,t.outlineColor.b),16),this._fillOpacity=t.fillOpacity,this._outlineOpacity=t.outlineOpacity,this._outlineSize=t.outlineSize,this._useAbsoluteCoordinates=t.absoluteCoordinates,this._clearBetweenFrames=t.clearBetweenFrames,this._antialiasing=t.antialiasing,this._renderer=new a.ShapePainterRuntimeObjectRenderer(this,e),this.onCreated()}getRendererObject(){return this._renderer.getRendererObject()}updateFromObjectData(e,t){return(e.fillColor.r!==t.fillColor.r||e.fillColor.g!==t.fillColor.g||e.fillColor.b!==t.fillColor.b)&&this.setFillColor(""+t.fillColor.r+";"+t.fillColor.g+";"+t.fillColor.b),(e.outlineColor.r!==t.outlineColor.r||e.outlineColor.g!==t.outlineColor.g||e.outlineColor.b!==t.outlineColor.b)&&this.setOutlineColor(""+t.outlineColor.r+";"+t.outlineColor.g+";"+t.outlineColor.b),e.fillOpacity!==t.fillOpacity&&this.setFillOpacity(t.fillOpacity),e.outlineOpacity!==t.outlineOpacity&&this.setOutlineOpacity(t.outlineOpacity),e.outlineSize!==t.outlineSize&&this.setOutlineSize(t.outlineSize),e.absoluteCoordinates!==t.absoluteCoordinates&&(this._useAbsoluteCoordinates=t.absoluteCoordinates,this._renderer.updatePositionX(),this._renderer.updatePositionY(),this._renderer.updateAngle(),this._renderer.updateScaleX(),this._renderer.updateScaleY()),e.clearBetweenFrames!==t.clearBetweenFrames&&(this._clearBetweenFrames=t.clearBetweenFrames),!0}stepBehaviorsPreEvents(e){this._clearBetweenFrames&&this.clear(),super.stepBehaviorsPreEvents(e)}onDestroyed(){super.onDestroyed(),this._renderer.destroy()}clear(){this._renderer.clear()}getVisibilityAABB(){return this._useAbsoluteCoordinates?null:this.getAABB()}drawRectangle(e,t,r,o){this._renderer.drawRectangle(e,t,r,o)}drawCircle(e,t,r){this._renderer.drawCircle(e,t,r)}drawLine(e,t,r,o,i){this._renderer.drawLine(e,t,r,o,i)}drawLineV2(e,t,r,o,i){this._renderer.drawLineV2(e,t,r,o,i)}drawEllipse(e,t,r,o){this._renderer.drawEllipse(e,t,r,o)}drawFilletRectangle(e,t,r,o,i){this._renderer.drawFilletRectangle(e,t,r,o,i)}drawRoundedRectangle(e,t,r,o,i){this._renderer.drawRoundedRectangle(e,t,r,o,i)}drawChamferRectangle(e,t,r,o,i){this._renderer.drawChamferRectangle(e,t,r,o,i)}drawTorus(e,t,r,o,i,l){this._renderer.drawTorus(e,t,r,o,i,l)}drawRegularPolygon(e,t,r,o,i){this._renderer.drawRegularPolygon(e,t,r,o,i)}drawStar(e,t,r,o,i,l){this._renderer.drawStar(e,t,r,o,i,l)}drawArc(e,t,r,o,i,l,s){this._renderer.drawArc(e,t,r,o,i,l,s)}drawBezierCurve(e,t,r,o,i,l,s,h){this._renderer.drawBezierCurve(e,t,r,o,i,l,s,h)}drawQuadraticCurve(e,t,r,o,i,l){this._renderer.drawQuadraticCurve(e,t,r,o,i,l)}beginFillPath(e,t){this._renderer.beginFillPath(),this._renderer.drawPathMoveTo(e,t)}endFillPath(){this._renderer.endFillPath()}drawPathMoveTo(e,t){this._renderer.drawPathMoveTo(e,t)}drawPathLineTo(e,t){this._renderer.drawPathLineTo(e,t)}drawPathBezierCurveTo(e,t,r,o,i,l){this._renderer.drawPathBezierCurveTo(e,t,r,o,i,l)}drawPathArc(e,t,r,o,i,l){this._renderer.drawPathArc(e,t,r,o,i,l)}drawPathQuadraticCurveTo(e,t,r,o){this._renderer.drawPathQuadraticCurveTo(e,t,r,o)}closePath(){this._renderer.closePath()}setClearBetweenFrames(e){this._clearBetweenFrames=e}isClearedBetweenFrames(){return this._clearBetweenFrames}setAntialiasing(e){this._antialiasing=e,this._renderer.updateAntialiasing()}getAntialiasing(){return this._antialiasing}checkAntialiasing(e){return this._antialiasing===e}setCoordinatesRelative(e){this._useAbsoluteCoordinates=!e}areCoordinatesRelative(){return!this._useAbsoluteCoordinates}setFillColor(e){const t=e.split(";");t.length<3||(this._fillColor=parseInt(a.rgbToHex(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)),16))}getFillColorR(){return a.hexNumberToRGB(this._fillColor).r}getFillColorG(){return a.hexNumberToRGB(this._fillColor).g}getFillColorB(){return a.hexNumberToRGB(this._fillColor).b}setOutlineColor(e){const t=e.split(";");t.length<3||(this._outlineColor=parseInt(a.rgbToHex(parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)),16),this._renderer.updateOutline())}getOutlineColorR(){return a.hexNumberToRGB(this._outlineColor).r}getOutlineColorG(){return a.hexNumberToRGB(this._outlineColor).g}getOutlineColorB(){return a.hexNumberToRGB(this._outlineColor).b}setOutlineSize(e){this._outlineSize=e,this._renderer.updateOutline()}getOutlineSize(){return this._outlineSize}setFillOpacity(e){this._fillOpacity=e}getFillOpacity(){return this._fillOpacity}setOutlineOpacity(e){this._outlineOpacity=e,this._renderer.updateOutline()}getOutlineOpacity(){return this._outlineOpacity}setX(e){e!==this.x&&(super.setX(e),this._renderer.updatePositionX())}setY(e){e!==this.y&&(super.setY(e),this._renderer.updatePositionY())}setAngle(e){e!==this.angle&&(super.setAngle(e),this._renderer.updateAngle(),this.invalidateHitboxes())}setRotationCenter(e,t){this._customCenter||(this._customCenter=[0,0]),this._customCenter[0]=e,this._customCenter[1]=t,this._renderer.updateRotationCenter()}getRotationCenterX(){return this._customCenter?this._customCenter[0]:this._renderer.getUnscaledWidth()/2-this._renderer.getFrameRelativeOriginX()}getRotationCenterY(){return this._customCenter?this._customCenter[1]:this._renderer.getUnscaledHeight()/2-this._renderer.getFrameRelativeOriginY()}getCenterX(){return this._customCenter?this._customCenter[0]*Math.abs(this._scaleX)+this.getX()-this.getDrawableX():super.getCenterX()}getCenterY(){return this._customCenter?this._customCenter[1]*Math.abs(this._scaleY)+this.getY()-this.getDrawableY():super.getCenterY()}setWidth(e){const t=this._renderer.getUnscaledWidth();t!==0&&this.setScaleX(e/t)}setHeight(e){const t=this._renderer.getUnscaledHeight();t!==0&&this.setScaleY(e/t)}setSize(e,t){this.setWidth(e),this.setHeight(t)}setScale(e){this.setScaleX(e),this.setScaleY(e)}setScaleX(e){e<0&&(e=0),e!==Math.abs(this._scaleX)&&(this._scaleX=e*(this._flippedX?-1:1),this._renderer.updateScaleX(),this.invalidateHitboxes())}setScaleY(e){e<0&&(e=0),e!==Math.abs(this._scaleY)&&(this._scaleY=e*(this._flippedY?-1:1),this._renderer.updateScaleY(),this.invalidateHitboxes())}flipX(e){e!==this._flippedX&&(this._scaleX*=-1,this._flippedX=e,this._renderer.updateScaleX(),this.invalidateHitboxes())}flipY(e){e!==this._flippedY&&(this._scaleY*=-1,this._flippedY=e,this._renderer.updateScaleY(),this.invalidateHitboxes())}isFlippedX(){return this._flippedX}isFlippedY(){return this._flippedY}getScale(){const e=Math.abs(this._scaleX),t=Math.abs(this._scaleY);return e===t?e:Math.sqrt(e*t)}getScaleY(){return Math.abs(this._scaleY)}getScaleX(){return Math.abs(this._scaleX)}invalidateBounds(){this.invalidateHitboxes()}getDrawableX(){return this._renderer.getDrawableX()}getDrawableY(){return this._renderer.getDrawableY()}getWidth(){return this._renderer.getWidth()}getHeight(){return this._renderer.getHeight()}updatePreRender(e){this._renderer.updatePreRender()}transformToDrawing(e,t){const r=n._pointForTransformation;return r[0]=e,r[1]=t,this._renderer.transformToDrawing(r)}transformToScene(e,t){const r=n._pointForTransformation;return r[0]=e,r[1]=t,this._renderer.transformToScene(r)}transformToDrawingX(e,t){return this.transformToDrawing(e,t)[0]}transformToDrawingY(e,t){return this.transformToDrawing(e,t)[1]}transformToSceneX(e,t){return this.transformToScene(e,t)[0]}transformToSceneY(e,t){return this.transformToScene(e,t)[1]}setRectangularCollisionMask(e,t,r,o){if(!this._customCollisionMask){const l=new a.Polygon;l.vertices.push([0,0]),l.vertices.push([0,0]),l.vertices.push([0,0]),l.vertices.push([0,0]),this._customCollisionMask=[l]}const i=this._customCollisionMask[0].vertices;i[0][0]=e,i[0][1]=t,i[1][0]=r,i[1][1]=t,i[2][0]=r,i[2][1]=o,i[3][0]=e,i[3][1]=o,this.invalidateHitboxes()}updateHitBoxes(){this.hitBoxes=this._defaultHitBoxes;const e=this.getWidth(),t=this.getHeight(),r=this.getCenterX(),o=this.getCenterY(),i=this.hitBoxes[0].vertices;if(this._customCollisionMask){const l=this._customCollisionMask[0].vertices;for(let s=0;s<4;s++){const h=this.transformToScene(l[s][0],l[s][1]);i[s][0]=h[0],i[s][1]=h[1]}}else r===e/2&&o===t/2?(i[0][0]=-r,i[0][1]=-o,i[1][0]=+r,i[1][1]=-o,i[2][0]=+r,i[2][1]=+o,i[3][0]=-r,i[3][1]=+o):(i[0][0]=0-r,i[0][1]=0-o,i[1][0]=e-r,i[1][1]=0-o,i[2][0]=e-r,i[2][1]=t-o,i[3][0]=0-r,i[3][1]=t-o),this._useAbsoluteCoordinates||this.hitBoxes[0].rotate(a.toRad(this.getAngle())),this.hitBoxes[0].move(this.getDrawableX()+r,this.getDrawableY()+o)}};let f=n;f._pointForTransformation=[0,0],a.ShapePainterRuntimeObject=f,a.registerObject("PrimitiveDrawing::Drawer",a.ShapePainterRuntimeObject),f.supportsReinitialization=!1})(gdjs||(gdjs={}));
//# sourceMappingURL=shapepainterruntimeobject.js.map
